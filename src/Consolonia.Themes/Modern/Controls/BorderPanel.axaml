<!-- FLUENT -->
<Styles xmlns="https://github.com/avaloniaui"
        xmlns:console="https://github.com/consolonia"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Styles.Resources>
        <console:PopupPlacementToOuterMargin x:Key="PopupPlacementToOuterMargin" />
        <ControlTheme x:Key="{x:Type console:BorderPanel}"
                      TargetType="console:BorderPanel">
            <Setter Property="Background"
                    Value="{DynamicResource ThemeAlternativeBackgroundBrush}" />
            <Setter Property="Template">
                <ControlTemplate>
                    <Decorator>
                        <Decorator.Padding>
                            <Binding
                                RelativeSource="{RelativeSource AncestorType=Popup, Mode=FindAncestor, Tree=Logical}"
                                Path="Placement"
                                Mode="OneWay"
                                Converter="{StaticResource PopupPlacementToOuterMargin}">
                                <Binding.FallbackValue>
                                    <Thickness>0</Thickness>
                                </Binding.FallbackValue>
                            </Binding>
                        </Decorator.Padding>
                        <Border x:Name="PART_Border"
                                BorderThickness="1">
                            <Border.BorderBrush>
                                <console:LineBrush LineStyle="Edge"
                                                   Brush="{DynamicResource ThemeBorderBrush}" />
                            </Border.BorderBrush>
                            <ContentPresenter Name="PART_ContentPresenter"
                                              Padding="{TemplateBinding Padding}"
                                              HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                              Background="{TemplateBinding Background}"
                                              RecognizesAccessKey="True"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}" />
                        </Border>
                    </Decorator>
                </ControlTemplate>
            </Setter>
        </ControlTheme>
    </Styles.Resources>
</Styles>